import{c as b,d as y,r as i,j as e}from"./index-CImipbVr.js";import{L as k}from"./loader-circle-EylTYG_P.js";import{C as h}from"./circle-alert-BvSVo7iX.js";/**
 * @license lucide-react v0.510.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],C=b("circle-check-big",P);function g(c,a={}){var o;(o=window.posthog)!=null&&o.capture&&window.posthog.capture(c,{event_id:crypto.randomUUID(),...a})}function S(c,a={}){window.fbq&&(["PageView","AddToCart","Purchase","InitiateCheckout"].includes(c)?window.fbq("track",c,a):window.fbq("trackCustom",c,a))}function x(c,a={}){window.gtag&&window.gtag("event",c,a)}function w(c,a={}){window.pintrk&&window.pintrk("track",c,a)}function j(c){const{orderId:a,value:o,currency:n,items:s}=c;g("Purchase",{order_id:a,value:o,currency:n,items:s}),s.forEach(t=>{g("Purchase_Item",{order_id:a,product_id:t.id,product_name:t.name,product_quantity:t.quantity,product_price:t.price})}),S("Purchase",{value:o,currency:n,transaction_id:a,contents:s.map(t=>({id:t.id,quantity:t.quantity,item_price:t.price})),content_type:"product"}),x("purchase",{transaction_id:a,value:o,currency:n,items:s.map(t=>({item_id:t.id,item_name:t.name,price:t.price,quantity:t.quantity}))}),w("checkout",{value:o,order_id:a,currency:n,line_items:s.map(t=>({product_id:t.id,product_quantity:t.quantity,product_price:t.price}))}),x("CompletePayment",{contents:s.map(t=>({content_id:t.id,content_name:t.name,quantity:t.quantity,price:t.price})),value:o,currency:n,order_id:a})}const I=()=>{const[c]=y(),[a,o]=i.useState(!0),[n,s]=i.useState(null),[t,p]=i.useState(null),u=c.get("sessionId");i.useEffect(()=>{if(!u){p({message:"Missing sessionId parameter"}),o(!1);return}f(u)},[u]);const f=async l=>{try{o(!0);const d=await fetch(`/api/products/purchase-detail?sessionId=${l}`,{method:"GET"}),r=await d.json();d.ok?(s(r),p(null),j({orderId:r.checkoutSessionId,value:r.totalAmount,currency:r.currency,items:r.products.map(m=>({id:m.id,name:m.name,price:m.price,quantity:m.quantity}))})):p(r)}catch(d){p({message:"Network error, please try again later"}),console.error("Error fetching purchase detail:",d)}finally{o(!1)}};return e.jsx("div",{"data-component-start":"72:4:2288","data-component-end":"172:10:6719","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"min-h-screen bg-gray-50 flex items-center justify-center",className:"min-h-screen bg-gray-50 flex items-center justify-center",children:e.jsx("div",{"data-component-start":"73:6:2369","data-component-end":"171:12:6708","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",className:"max-w-2xl w-full bg-white rounded-lg shadow-md p-8 text-center",children:a?e.jsxs("div",{"data-component-start":"75:10:2481","data-component-end":"78:16:2692","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"text-center",className:"text-center",children:[e.jsx(k,{"data-component-start":"76:12:2523","data-component-end":"76:85:2596","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"Loader2","data-component-class":"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4",className:"h-12 w-12 animate-spin text-blue-600 mx-auto mb-4"}),e.jsx("p",{"data-component-start":"77:12:2609","data-component-end":"77:78:2675","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"p","data-component-class":"text-gray-600",className:"text-gray-600",children:"Verifying purchase information..."})]}):t?e.jsxs(e.Fragment,{children:[e.jsx(h,{"data-component-start":"81:12:2740","data-component-end":"81:75:2803","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"AlertCircle","data-component-class":"h-16 w-16 text-red-500 mx-auto mb-4",className:"h-16 w-16 text-red-500 mx-auto mb-4"}),e.jsx("h1",{"data-component-start":"82:12:2816","data-component-end":"84:17:2918","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Purchase Failed"}),e.jsx("div",{"data-component-start":"85:12:2931","data-component-end":"87:18:3131","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsx("p",{"data-component-start":"86:14:3015","data-component-end":"86:111:3112","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"p","data-component-class":"text-red-600 text-sm",className:"text-red-600 text-sm",children:`Failed to get purchase information: ${t==null?void 0:t.message}`})}),e.jsx("button",{"data-component-start":"88:12:3144","data-component-end":"93:21:3379","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"button","data-component-class":"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Retry Verification"})]}):n?e.jsxs(e.Fragment,{children:[e.jsx(C,{"data-component-start":"107:12:3813","data-component-end":"107:77:3878","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"CheckCircle","data-component-class":"h-16 w-16 text-green-500 mx-auto mb-4",className:"h-16 w-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{"data-component-start":"108:12:3891","data-component-end":"110:17:3998","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Purchase Successful!"}),e.jsx("p",{"data-component-start":"111:12:4011","data-component-end":"113:16:4135","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"p","data-component-class":"text-gray-600 mb-6",className:"text-gray-600 mb-6",children:"Thank you for your purchase, your order has been confirmed"}),n.products&&n.products.length>0?e.jsx("div",{"data-component-start":"116:14:4226","data-component-end":"157:20:6244","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"space-y-4",className:"space-y-4",children:e.jsxs("div",{"data-component-start":"117:16:4270","data-component-end":"156:22:6223","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",className:"bg-gradient-to-br from-green-50 to-emerald-50 border border-green-200 rounded-xl p-6 shadow-sm",children:[e.jsxs("h3",{"data-component-start":"118:18:4401","data-component-end":"121:23:4618","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"h3","data-component-class":"text-lg font-semibold text-green-800 mb-4",className:"text-lg font-semibold text-green-800 mb-4",children:["Your Order (",n.products.length," item",n.products.length>1?"s":"",")"]}),e.jsx("div",{"data-component-start":"123:18:4638","data-component-end":"140:24:5449","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"space-y-3 mb-6",className:"space-y-3 mb-6",children:n.products.map((l,d)=>e.jsx("div",{"data-component-start":"126:24:4800","data-component-end":"137:30:5377","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-map-start":"124:21:4692","data-component-map-end":"139:21:5423","data-component-class":"bg-white/60 rounded-lg p-4 border border-green-200",className:"bg-white/60 rounded-lg p-4 border border-green-200",children:e.jsx("div",{"data-component-start":"130:26:4984","data-component-end":"136:32:5346","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"flex items-center justify-between",className:"flex items-center justify-between",children:e.jsx("div",{"data-component-start":"131:28:5064","data-component-end":"135:34:5313","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"flex-1",className:"flex-1",children:e.jsx("h4",{"data-component-start":"132:30:5119","data-component-end":"134:35:5278","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"h4","data-component-class":"font-medium text-green-800",className:"font-medium text-green-800",children:l.productName||`Product ${d+1}`})})})},d))}),e.jsxs("div",{"data-component-start":"142:18:5469","data-component-end":"155:24:6200","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"space-y-3",className:"space-y-3",children:[e.jsx("a",{"data-component-start":"143:20:5517","data-component-end":"148:24:5843","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"a","data-component-class":"w-full bg-brand-primary text-white px-6 py-3 rounded-lg hover:bg-brand-primary/90 transition-colors flex items-center justify-center gap-2 no-underline font-medium",href:"/account",className:"w-full bg-brand-primary text-white px-6 py-3 rounded-lg hover:bg-brand-primary/90 transition-colors flex items-center justify-center gap-2 no-underline font-medium",children:"Ir para Meu Portal"}),e.jsx("a",{"data-component-start":"149:20:5864","data-component-end":"154:24:6175","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"a","data-component-class":"w-full bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2 no-underline font-medium",href:"/",className:"w-full bg-gray-200 text-gray-800 px-6 py-3 rounded-lg hover:bg-gray-300 transition-colors flex items-center justify-center gap-2 no-underline font-medium",children:"Voltar para o In√≠cio"})]})]})}):null,e.jsx("div",{"data-component-start":"160:12:6280","data-component-end":"168:18:6670","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"mt-8 pt-6 border-t border-gray-200",className:"mt-8 pt-6 border-t border-gray-200",children:n.checkoutSessionId&&e.jsx("div",{"data-component-start":"162:16:6400","data-component-end":"166:22:6634","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"div","data-component-class":"mb-4",className:"mb-4",children:e.jsxs("p",{"data-component-start":"163:18:6441","data-component-end":"165:22:6611","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"p","data-component-class":"text-sm font-mono text-gray-800 bg-gray-100 px-3 py-2 rounded border",className:"text-sm font-mono text-gray-800 bg-gray-100 px-3 py-2 rounded border",children:["Order ID: ",n.checkoutSessionId]})})})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{"data-component-start":"97:12:3449","data-component-end":"97:78:3515","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"AlertCircle","data-component-class":"h-16 w-16 text-yellow-500 mx-auto mb-4",className:"h-16 w-16 text-yellow-500 mx-auto mb-4"}),e.jsx("h1",{"data-component-start":"98:12:3528","data-component-end":"100:17:3645","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"h1","data-component-class":"text-2xl font-bold text-gray-900 mb-2",className:"text-2xl font-bold text-gray-900 mb-2",children:"Purchase Information Not Found"}),e.jsx("p",{"data-component-start":"101:12:3658","data-component-end":"103:16:3759","data-component-path":"src/react-app/pages/CheckoutSuccessPage.tsx","data-component-file":"CheckoutSuccessPage.tsx","data-component-name":"p","data-component-class":"text-gray-600",className:"text-gray-600",children:"Please check if the sessionId is correct"})]})})})};export{I as CheckoutSuccessPage};
